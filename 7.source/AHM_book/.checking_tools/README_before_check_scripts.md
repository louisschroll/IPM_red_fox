
# Checking code in this repository

When the checking script in this directory is `source`d, it will run every "\*.R" script in R's current directory and subdirectories, except those with "#" in the name.

It creates a log file in the target directory with the name "#check_<date>.log". For each file, it logs the name of the file, the starting time, any error messages, and the script execution time if greater than 20 secs. When all are done, it records the overall time taken and the output from `sessionInfo()`.

It checks that graphical parameters are restored to the original values and reports discrepancies.

It cleans up the workspace and detaches packages between running scripts.

All graphics produced by the script are saved in a PDF file with the same name. At the end, the workspace is saved in a .RData file, including an object called `sessionInfo` with the output from `sessionInfo()`. These file names end with `#.pdf` or `#.RData` to distinguish them from files generated by the script.

If there is an appropriately-named `#.RData` file in the folder from a previous run, the script will load it and compare the current output with the last run using `all.equal`. Objects that don't match are listed in the log file.

## Installing and updating packages

Before running the scripts, you may want to check that the necessary packages are installed. See the "install_packages.R" script.

If you want to install latest devel/patched versions of packages from Github, use or adapt the following code:
```
remotes::install_github("mikemeredith/AHMbook")
packageVersion("AHMbook")
remotes::install_github("rbchan/unmarked")
packageVersion("unmarked")
remotes::install_github("kenkellner/jagsUI")
packageVersion("jagsUI")
```
